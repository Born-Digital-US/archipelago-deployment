{
  "data": {
    "type": "metadatadisplay_entity--metadatadisplay_entity",
    "id": "05fe574d-7534-4261-b49b-895b94ac3fce",
    "attributes": {
      "name": "IIIF Presentation API 2.1 Manifest",
      "twig": "{# This Template generates IIIF 2.1 Presentation API Manifest from a Strawberry Field\r\nJSON.\r\n\r\nStructures passed from Archipelago are\r\n- node\r\n  The full Node entity\r\n- data\r\n  The Full JSON Structure converted in an Array\r\n- iiif_server\r\n  The publicly available IIIF Server (Global Setting)\r\n\r\nSince JSON was decoded into the 'data' values are valid PHP but could not\r\nbe valid JSON when outputting. So We use data.description|json_encode|raw\r\nWithout Double quotes.\r\n\r\n#}\r\n{% set Webserverurl =  url('<front>')|render|replace({':8001\/':''}) ~ ':8183\/iiif\/2\/' %}\r\n  {% set IIIFserverurl = iiif_server ? iiif_server ~ '\/': Webserverurl %}\r\n    {% if node.id %}\r\n        {% set nodeurl = url('entity.node.canonical', {'node': node.id}, {'absolute': true}) %}\r\n    {% else %}\r\n        {% set nodeurl = '<current>' ~ '\/iiif\/manifest' %}\r\n    {% endif%}\r\n{\r\n\"@context\": [\r\n\"http:\/\/www.w3.org\/ns\/anno.jsonld\",\r\n\"http:\/\/iiif.io\/api\/presentation\/2\/context.json\"\r\n],\r\n\"@type\": \"sc:Manifest\",\r\n\"@id\": \"{{ nodeurl }} \",\r\n\"label\": \"{{ node.label }}\",\r\n\"description\": {{ data.description|json_encode|raw }},\r\n\"metadata\": [\r\n{% for agent in attribute(data, 'edm_agent') %}\r\n    {\r\n    \"label\": {{ agent.role_label|json_encode|raw }},\r\n    \"value\": {{ agent.name_label|json_encode|raw }}\r\n    },\r\n{% endfor %}\r\n{\r\n\"label\": \"description\",\r\n\"value\": {{ data.description|json_encode|raw }}\r\n},\r\n{\r\n\"label\": \"type\",\r\n\"value\": {{ data.type|json_encode|raw }}\r\n},\r\n{\r\n\"label\": \"navDate\",\r\n\"value\": \"{{ node.getChangedTime|date(\"F jS \\\\a\\\\t g:ia\") }}\"\r\n},\r\n{\r\n\"label\": \"license\",\r\n\"value\": \"http:\/\/rightsstatements.org\/vocab\/InC-EDU\/1.0\/\"\r\n},\r\n{\r\n\"label\": \"attribution\",\r\n\"value\": \"Provided by Archipelago's demo\"\r\n}\r\n],\r\n{% if attribute(data, 'memberof') %}\r\n    {% set currentnode = 'node\/' ~ data.memberof %}\r\n    \"within\": \"{{ url(currentnode) }}\",\r\n{% else %}\r\n    {% set currentnode = '<current>' %}\r\n{% endif %}\r\n\"sequences\": [\r\n{\r\n\"@id\": \"{{ nodeurl }}\/sequence\/normal\",\r\n\"@type\": \"sc:Sequence\",\r\n\"label\": \"Current Page Order\",\r\n\"viewingDirection\": \"left-to-right\",\r\n\"viewingHint\": \"paged\",\r\n\"canvases\": [\r\n{% for page in attribute(data, 'as:image') %}\r\n    {\r\n    \"@id\": \"{{ nodeurl }}\/canvas\/p{{ loop.index }}\",\r\n    \"@type\": \"sc:Canvas\",\r\n    \"label\": \"p. {{ loop.index }}\",\r\n    \"images\": [{\r\n    \"@type\": \"oa:Annotation\",\r\n    \"motivation\": \"sc:painting\",\r\n    \"resource\":{\r\n    \"@id\": \"{{ IIIFserverurl ~ page['url']|replace({'s3:\/\/':''})|replace({'private:\/\/':''})|url_encode }}\/full\/1200,\/0\/default.jpg\",\r\n    \"@type\": \"dctypes:Image\",\r\n    \"format\": \"image\/jpeg\",\r\n    \"service\": {\r\n    \"@context\": \"http:\/\/iiif.io\/api\/image\/2\/context.json\",\r\n    \"@id\": \"{{ IIIFserverurl ~ page['url']|replace({'s3:\/\/':''})|replace({'private:\/\/':''})|url_encode }}\",\r\n    \"profile\": \"http:\/\/iiif.io\/api\/image\/2\/level2.json\"\r\n    },\r\n    \"width\": 1200\r\n    },\r\n    \"on\": \"{{ nodeurl }}\/canvas\/p{{ loop.index }}\"\r\n    }]\r\n    }{{ not loop.last ? ',' : '' }}\r\n{% endfor %}\r\n]\r\n}],\r\n\"structures\": [{\r\n\"@id\": \"{{ nodeurl }}\/range\/r1\",\r\n\"@type\": \"sc:Range\",\r\n\"label\": \"Introduction\",\r\n\"canvases\": [\r\n{% for range in attribute(data, 'as:image') %}\r\n    \"{{ nodeurl }}\/iiif\/canvas\/p{{ loop.index }}\"{{ not loop.last ? ',' : '' }}\r\n{% endfor %}\r\n]\r\n}]\r\n}",
      "langcode": "und",
      "mimetype": "application/ld+json"
    }
  }
}
